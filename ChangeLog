2006-04-14  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev.h:
	evdevAbsRec: Remove the scale bool, rename scale_x and scale_y
	to scale[2].
	evdevAxesRec: Make btnMap an int array instead of a Card8 array.
	* src/evdev_axes.c: (EvdevAxesAbsSyn), (EvdevAxesAbsProcess),
	(EvdevAxisAbsNew), (EvdevAxesInit):
	Make abs support and non-core stuff actually work.

	Relative emulation for abs mode is still a bit broken, but that's far
	less critical.

	* src/evdev_btn.c: (EvdevBtnInit):
	How many buttons we've registered is configuration information, not an
	error message.

2006-04-08  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev.c: (EvdevCorePreInit):
	Remove a debugging message.
	* src/evdev_axes.c: (EvdevAxesNew), (EvdevAxesInit):
	Actually, well, _work_.
	Note, abs support still segfaults, I'll debug it after I've slept.
	But I should get it tomorrow.

2006-04-08  Zephaniah E. Hull  <warp@aehallh.com>

	* configure.ac:
	Dropped the xorg-xserver 1.0.99.901 requirement.
	(Things were tweaked to mostly work for older servers again.)
	* src/evdev.c: (EvdevReadInput):
	Close the device properly on read errer.
	* src/evdev_brain.c: (evdevReadInput), (evdevControl):
	Minimal inotify support, not ideal yet, but...
	* src/inotify-syscalls.h:
	Minimal inotify support, not ideal yet, but...
	* src/inotify.h:
	Minimal inotify support, not ideal yet, but...

2006-04-08  Zephaniah E. Hull  <warp@aehallh.com>

	* src/Makefile.am:
	Remove evdev_abs.c and evdev_rel.c.
	Added evdev_axes.c.
	* src/evdev.c: (EvdevReadInput), (EvdevProc), (EvdevNew),
	(EvdevPtrCtrlProc):
	Change the calls to refer to EvdevAxes instead of Abs and Rel.
	Include mipointer.h. (Fixes a compile error.)
	Remove an unused variable from EvdevReadInput.
	* src/evdev.h:
	Removed evdev_abs.c and evdev_rel.c, added evdev_axes.c.
	Added count to rel and abs.
	Moved btnMap from rel to the new axes.
	Shuffle some includes, and include stdarg.h.
	* src/evdev_abs.c:
	Removed.
	* src/evdev_axes.c: (EvdevConvert), (EvdevAxesRealSyn),
	(EvdevAxesAbsSyn), (EvdevAxesRelSyn), (EvdevAxesSyn),
	(EvdevAxesAbsProcess), (EvdevAxesRelProcess), (EvdevAxesOn),
	(EvdevAxesOff), (EvdevAxisAbsNew), (EvdevAxisRelNew),
	(EvdevAxesNew), (EvdevPtrCtrlProc), (EvdevAxesInit):
	New, a mix of rel and abs that should actually work in the
	rel case.
	* src/evdev_btn.c: (EvdevBtnCalcRemap):
	Rearrange include order.
	btnMap was moved from being part of rel to being part of axes.
	* src/evdev_rel.c:
	Removed.
	* src/evdev_brain.c:
	Rearrange include order.
	* src/evdev_key.c:
	Rearrange include order.

	NOTE: This commit has been compile tested, not run tested.

	I have some other changes to make before I can do more heavy testing.

2006-04-06  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	* src/evdev.c:
	* src/evdev.h:
	* src/evdev_abs.c:
	* src/evdev_btn.c:
	* src/evdev_key.c:
	* src/evdev_rel.c:
	Unlibcwrap.  Bump server version requirement.  Bump to 1.1.0.

2006-03-31  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev_brain.c: (FillDevInfo), (evdevRescanDevices):
	Fix the fd pointer leak reported by primer.  (Not the same patch.)
	* src/evdev_key.c: (EvdevKeyNew):
	Disable the undocumented xkb guts options in the key driver.
	(Requested by Daniel Stone.)

2006-03-16  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev_brain.c: (MatchDriver):
	Switch from my own globbing function to fnmatch.

	* src/evdev_key.c: (EvdevKeyNew):
	Detect keys numbered higher then buttons.
	Remove the (depreciated since long before xkb support was added to
	evdev) XkbKeymap option.

2006-03-16  Zephaniah E. Hull  <warp@aehallh.com>

	* man/evdev.man:
	Update to include all the new device matching options.

2006-02-27  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev_key.c: (EvdevKeyOff):
	Don't leave keys in the down state when we get turned off.
	(VT switching, getting unplugged, that sort of stuff.)

2006-02-27  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev.c: (EvdevReadInput):
	Better error reporting if the read fails.

	* src/evdev_brain.c: (evdevNewDriver):
	Work properly if we're defining entirely by capability maps.

2006-02-24  Zephaniah E. Hull  <warp@aehallh.com>

	* src/Makefile.am:
	Compile with -Wall now.
	Add evdev.h to the sources so that make distcheck gets it.

	* src/evdev.h:
	Bugzilla #5943 <https://bugs.freedesktop.org/show_bug.cgi=5943>
	Make sure we include errno.h.

	Reduce EVDEV_MAXBUTTONS to 96.

	Split up evdevStateRec into a struct with pointers to new structs
	for btn, abs, rel, and key.

	New structure type for handling the device capability bitmaps.

	Add device bits and struct input_id to evdevDeviceRec.

	Add matching device bits, struct input_id, and pass number to
	evdevDriverRec.

	Prototype for evdevGetBits from evdev_brain.c.

	* src/evdev.c: (EvdevProc), (EvdevSwitchMode), (EvdevNew),
	(EvdevParseBits), (EvdevParseBitOption), (EvdevCorePreInit):
	Conversion for the evdevStateRec split.

	Remove the errno.h include, it's in evdev.h for now.

	Move the bit getting from the drivers to here, into evdevDeviceRec.

	Fix a rare case of fd leakage.

	Add several new (and somewhat ugly) device matching options:
	<map>Bits: Where map is one of ev, key, rel, abs, msc, led, snd, or
	ff.
	In the format of '+0 +3 -1-2 ~5-10', requires bits 0 and 3 be set,
	bits 1 and 2 to not be set, and at least one bit in the range of 5 to
	10 be set.
	bustype, vendor, product, and version: Simple integer options for
	matching the struct device_id fields, must be 0 (the default) or the
	exact value you wish to match against.
	pass: Bounded to 0-3, devices are matched to the first matching entry
	found, order for multiple matching entries in the same pass is
	undefined, but it starts with pass 0 and goes to pass 3.

	* src/evdev_abs.c: (EvdevAbsSyn), (EvdevAbsProcess),
	(EvdevAbsInit), (EvdevAbsNew):
	Adaptation for the evdevStateRec split and the change in capability
	bitmap handling.

	* src/evdev_brain.c: (MatchAll), (MatchNot), (MatchAny),
	(MatchDriver), (MatchDevice), (evdevScanDevice), (FillDevInfo),
	(evdevRescanDevices), (evdevGetBits):
	Add evdevGetBits to fill the new evdevBitsRec struct type.

	Lots of somewhat ugly code for matching by capability bits.

	Split out of evdevRescanDevices to smaller handling functions.
	The new design should be better if I decide to handle arbitrary Device
	fields again.

	* src/evdev_btn.c: (EvdevBtnInit), (EvdevBtnOn),
	(EvdevBtnCalcRemap), (EvdevBtnNew), (EvdevBtnProcess):
	Adaptation for the evdevStateRec split and the change in capability
	bitmap handling.

	Handle all buttons, no button compression at this time, however we
	reorder things so that BTN_MOUSE comes before BTN_MISC, somewhat
	evily.

	Support for the new btn->state[] array of int pointers.

	* src/evdev_key.c: (EvdevKeyInit), (SetXkbOption), (EvdevKeyNew):
	Adaptation for the evdevStateRec split and the change in capability
	bitmap handling.

	* src/evdev_rel.c: (EvdevRelSyn), (EvdevRelProcess),
	(EvdevRelInit), (EvdevRelNew):
	Adaptation for the evdevStateRec split and the change in capability
	bitmap handling.

2006-02-20  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev_btn.c: (EvdevBtnInit):
	Bugzilla #5950 <https://bugs.freedesktop.org/show_bug.cgi=5950>
	Possible (maybe) fix for bug #5950.
	Though, I'm not convinced and still don't see how this bug could
	be happening, especially if this doesn't do it.

2006-02-19  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev_key.c: (EvdevKbdBell):
	Add bell support.

2006-02-16  Zephaniah E. Hull  <warp@aehallh.com>

	* src/evdev_btn.c: (EvdevBtnCalcRemap):
	Bugzilla #5914 <https://bugs.freedesktop.org/show_bug.cgi?id=5914>
	Stupid little bug, properly handle wheels on 3 button mice.

2006-02-14  Zephaniah E. Hull  <warp@aehallh.com>

	* configure.ac:
	* man/evdev.man:
	* src/Makefile.am:
	* src/evdev.c: (EvdevReadInput), (EvdevSigioReadInput),
	(EvdevProc), (EvdevSwitchMode), (EvdevNew), (EvdevCorePreInit):
	* src/evdev.h:
	* src/evdev_abs.c: (EvdevPtrCtrlProc), (EvdevConvert),
	(EvdevAbsSyn), (EvdevAbsProcess), (EvdevAbsInit), (EvdevAbsOn),
	(EvdevAbsOff), (EvdevAbsNew):
	* src/evdev_brain.c: (glob_match), (evdevGetFDForDevice),
	(evdevRescanDevices), (evdevReadInput), (evdevControl),
	(evdevStart), (evdevNewDriver):
	* src/evdev_btn.c: (EvdevBtnPostFakeClicks), (EvdevBtnInit),
	(EvdevBtnOn), (EvdevBtnOff), (EvdevBtnCalcRemap), (EvdevBtnNew),
	(EvdevBtnProcess):
	* src/evdev_key.c: (EvdevKbdBell), (EvdevKbdCtrl), (EvdevKeyInit),
	(SetXkbOption), (EvdevKeyNew), (EvdevKeyOn), (EvdevKeyOff),
	(EvdevKeyProcess):
	* src/evdev_rel.c: (EvdevPtrCtrlProc), (EvdevConvert),
	(EvdevRelSyn), (EvdevRelProcess), (EvdevRelInit), (EvdevRelOn),
	(EvdevRelOff), (EvdevRelNew):
	Bugzilla #5696 <https://bugs.freedesktop.org/show_bug.cgi?id=5696>
	Slightly updated version of the patch listed.
	Basicly a rewrite of the driver, with a few pieces of the old.
	XKB support, proper device matching, basic absolute pointer support.
	Lots more, will require some user config changes.

2006-01-09  David Nusinow,,,  <set EMAIL_ADDRESS environment variable>

	* man/Makefile.am:
	* man/evdev.man:
	Bugzilla #968 <https://bugs.freedesktop.org/show_bug.cgi?id=968>
	Patch #4301 <https://bugs.freedesktop.org/attachment.cgi?id=4301>
	Add evdev manpage

2005-12-20  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version for X11R7 release.

2005-12-14  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version number for final X11R7 release candidate.

2005-12-06  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* man/Makefile.am:
	Change *man_SOURCES ==> *man_PRE to fix autotools warnings.

2005-12-03  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version number for X11R7 RC3 release.

2005-12-01  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Remove extraneous AC_MSG_RESULT.

2005-11-29  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	Only build dlloader modules by default.

2005-11-09  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update package version number for X11R7 RC2 release.

2005-11-01  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Update pkgcheck dependencies to work with separate build roots.
